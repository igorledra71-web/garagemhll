<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Garagem HL - Est√©tica Automotiva</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  width:100%;
  min-height:100vh;
  background:#0b0b0b;
  font-family:Arial, Helvetica, sans-serif;
  color:#ffffff;
}

/* TELAS */
section{
  display:none;
  min-height:100vh;
  padding:30px 20px 160px;
}
#home{ display:block; }

/* CONTAINER APP */
.app-container{
  width:100%;
  max-width:480px;
  margin:auto;
  text-align:center;
}

/* LOGO */
.logo-container{
  width:100%;
  margin:20px auto 10px;
}
.logo-container img{
  width:100%;
  max-width:400px;
  height:auto;
  display:block;
  margin:0 auto;
}
.slogan{
  color:#d4af37;
  font-size:14px;
  letter-spacing:2px;
  margin-top:10px;
}

/* BOT√ïES */
button{
  width:100%;
  padding:22px;
  margin:18px 0;
  font-size:18px;
  border:none;
  border-radius:18px;
  font-weight:bold;
}
.btn-main{
  background:linear-gradient(135deg,#00b4ff,#5fd1ff);
  color:#00141f;
}
.btn-alt{
  background:transparent;
  border:2px solid #00b4ff;
  color:#00b4ff;
}

/* VOLTAR */
.back{
  color:#d4af37;
  margin-bottom:20px;
  display:inline-block;
  font-size:15px;
}

/* SERVI√áOS */
.service{
  background:#141414;
  border:1px solid #2a2a2a;
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
}
.service-title{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:15px;
  color:#d4af37;
  cursor:pointer;
}
.service-desc{
  display:none;
  margin-top:10px;
  font-size:13px;
  color:#cccccc;
}
.price{
  margin-top:6px;
  font-weight:bold;
}
.add-btn{
  margin-top:10px;
  width:100%;
  padding:12px;
  background:#d4af37;
  color:#000;
  border:none;
  border-radius:12px;
  font-weight:bold;
}

/* CARRINHO */
#cart{
  position:fixed;
  bottom:10px;
  left:10px;
  right:10px;
  background:#000;
  border:1px solid #222;
  border-radius:16px;
  padding:12px;
  display:none;
  z-index:10;
}
.cart-item{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  padding:5px 0;
  border-bottom:1px dashed #333;
}
.remove{
  color:#ff4d4d;
  cursor:pointer;
}
.whatsapp{
  width:100%;
  padding:14px;
  background:#25D366;
  border:none;
  border-radius:12px;
  color:#fff;
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>
<body>

<!-- HOME -->
<section id="home">
  <div class="app-container">

    <div class="logo-container">
      <img src="logo-garagem-hl.png" alt="Garagem HL Est√©tica Automotiva">
    </div>

    <div class="slogan">EST√âTICA AUTOMOTIVA</div>

    <button class="btn-main" onclick="abrirServicos()">üöø SERVI√áOS DISPON√çVEIS</button>
    <button class="btn-alt" onclick="abrirAgendamento()">üì≤ AGENDAMENTO</button>

  </div>
</section>

<!-- SERVI√áOS -->
<section id="servicos">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>

  <div class="app-container">

    <div class="logo-container">
      <img src="logo-garagem-hl.png" alt="Garagem HL Est√©tica Automotiva">
    </div>

    <!-- AQUI FICA SUA LISTA DE SERVI√áOS (como j√° estava, n√£o mexi) -->

  </div>
</section>

<!-- AGENDAMENTO -->
<section id="agendamento">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>

  <div class="app-container">

    <div class="logo-container">
      <img src="logo-garagem-hl.png" alt="Garagem HL Est√©tica Automotiva">
    </div>

    <h3 style="color:#d4af37;margin:20px 0">üìÖ Datas dispon√≠veis</h3>

    <!-- üî• CALEND√ÅRIO -->
    <div id="calendario" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;"></div>

    <button class="btn-main" onclick="window.open('https://wa.me/5549999741891','_blank')">üí¨ Henrique ‚Äì WhatsApp</button>
    <button class="btn-alt" onclick="window.open('https://wa.me/5547991194498','_blank')">üí¨ Luan ‚Äì WhatsApp</button>

  </div>
</section>

<!-- CARRINHO -->
<div id="cart">
  <div id="cartItems"></div>
  <strong>Total: R$ <span id="total">0</span></strong>
  <button class="whatsapp" onclick="finalizar()">Finalizar no WhatsApp</button>
</div>
<script>
let cart = [];
let total = 0;

function abrirServicos(){ mostrar("servicos"); }

/* üî• AQUI EST√Å A CORRE√á√ÉO */
function abrirAgendamento(){ 
  mostrar("agendamento"); 
  carregarDatas(); 
}

function voltarHome(){ mostrar("home"); }

function mostrar(id){
  document.getElementById("home").style.display="none";
  document.getElementById("servicos").style.display="none";
  document.getElementById("agendamento").style.display="none";
  document.getElementById(id).style.display="block";
}

function toggle(el){
  const d = el.nextElementSibling;
  d.style.display = d.style.display==="block" ? "none" : "block";
}

function add(nome, valor){
  cart.push({nome, valor});
  total += valor;
  renderCart();
  document.getElementById("cart").style.display="block";
}

function renderCart(){
  let h="";
  cart.forEach((i,n)=>{
    h+=`<div class="cart-item">${i.nome} <span class="remove" onclick="removeItem(${n})">‚ùå</span></div>`;
  });
  document.getElementById("cartItems").innerHTML=h;
  document.getElementById("total").innerText=total.toFixed(2);
}

function removeItem(i){
  total-=cart[i].valor;
  cart.splice(i,1);
  renderCart();
  if(cart.length===0) document.getElementById("cart").style.display="none";
}

function finalizar(){
  let msg="Ol√°, gostaria de contratar:%0A";
  cart.forEach(i=>msg+="- "+i.nome+"%0A");
  msg+="%0ATotal: R$ "+total.toFixed(2);
  window.open("https://wa.me/5549999741891?text="+msg,"_blank");
}
</script>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyA1dD4ZfO2lJ7ZCoFhVMtP7sBP3Xcl6-0A",
  authDomain: "garagem-hl1.firebaseapp.com",
  projectId: "garagem-hl1",
  storageBucket: "garagem-hl1.firebasestorage.app",
  messagingSenderId: "205564911928",
  appId: "1:205564911928:web:e40862dc3aaecfce44e1cd"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  function carregarDatas(){
    db.collection("datas_disponiveis").onSnapshot(snapshot => {
      let html = "";

      snapshot.forEach(doc => {
        const dados = doc.data();
        if(dados.disponivel === true){
          html += `
            <button 
              style="padding:14px;border-radius:12px;border:none;font-weight:bold;background:#00b4ff;color:#00141f"
              onclick="reservarData('${doc.id}')"
            >
              ${formatarData(doc.id)}
            </button>
          `;
        }
      });

      if(html === ""){
        html = "<p style='color:#aaa;text-align:center'>Nenhuma data dispon√≠vel</p>";
      }

      document.getElementById("calendario").innerHTML = html;
    });
  }

  function reservarData(data){
    if(confirm("Confirmar reserva para " + formatarData(data) + "?")){
      db.collection("datas_disponiveis").doc(data).update({
        disponivel: false
      }).then(() => {
        alert("‚úÖ Data reservada com sucesso!");
      });
    }
  }

  function formatarData(data){
    const partes = data.split("-");
    return partes[2] + "/" + partes[1] + "/" + partes[0];
  }
</script>

</body>
</html>

