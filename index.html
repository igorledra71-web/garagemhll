<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Garagem HL - Est√©tica Automotiva</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:#0b0b0b;
  color:#fff;
  font-family:Arial, Helvetica, sans-serif;
  min-height:100vh;
}

/* TELAS */
section{
  display:none;
  min-height:100vh;
  padding:30px 20px 140px;
}
#home{display:block}

/* CONTAINER */
.app-container{
  max-width:480px;
  margin:auto;
  text-align:center;
}

/* LOGO */
.logo-container{
  margin:20px auto;
}
.logo-container img{
  width:100%;
  max-width:380px;
  display:block;
  margin:auto;
}
.slogan{
  color:#d4af37;
  letter-spacing:2px;
  font-size:14px;
}

/* BOT√ïES */
button{
  width:100%;
  padding:20px;
  margin:18px 0;
  border:none;
  border-radius:18px;
  font-size:18px;
  font-weight:bold;
}
.btn-main{
  background:linear-gradient(135deg,#00b4ff,#5fd1ff);
  color:#00141f;
}
.btn-alt{
  background:transparent;
  border:2px solid #00b4ff;
  color:#00b4ff;
}

/* VOLTAR */
.back{
  display:inline-block;
  margin-bottom:20px;
  color:#d4af37;
  font-size:15px;
  cursor:pointer;
}

/* CARRINHO */
#cart{
  position:fixed;
  bottom:10px;
  left:10px;
  right:10px;
  background:#000;
  border:1px solid #222;
  border-radius:16px;
  padding:12px;
  display:none;
  z-index:10;
}
.cart-item{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  font-size:13px;
  border-bottom:1px dashed #333;
}
.remove{
  color:#ff4d4d;
  cursor:pointer;
}
.whatsapp{
  width:100%;
  padding:14px;
  background:#25D366;
  border:none;
  border-radius:12px;
  color:#fff;
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>
<body>

<!-- HOME -->
<section id="home">
  <div class="app-container">

    <div class="logo-container">
      <img src="logo-garagem-hl.png" alt="Garagem HL">
    </div>

    <div class="slogan">EST√âTICA AUTOMOTIVA</div>

    <button class="btn-main" onclick="abrirServicos()">üöø SERVI√áOS DISPON√çVEIS</button>
    <button class="btn-alt" onclick="abrirAgendamento()">üìÖ AGENDAMENTO</button>

  </div>
</section>

<!-- SERVI√áOS -->
<section id="servicos">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>

  <div class="app-container">
    <h2 style="color:#d4af37;margin-bottom:20px">Servi√ßos</h2>

    <button class="btn-main" onclick="add('Lavagem Simples',30)">Lavagem Simples - R$30</button>
    <button class="btn-main" onclick="add('Lavagem Completa',50)">Lavagem Completa - R$50</button>
    <button class="btn-main" onclick="add('Polimento',150)">Polimento - R$150</button>
    <button class="btn-main" onclick="add('Higieniza√ß√£o Interna',120)">Higieniza√ß√£o Interna - R$120</button>

  </div>
</section>

<!-- AGENDAMENTO -->
<section id="agendamento">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>

  <div class="app-container">
    <h2 style="color:#d4af37;margin-bottom:20px">Agendamento</h2>

    <!-- CALEND√ÅRIO -->
    <div id="calendario" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px"></div>

    <button class="btn-main" onclick="window.open('https://wa.me/5549999741891','_blank')">Henrique - WhatsApp</button>
    <button class="btn-alt" onclick="window.open('https://wa.me/5547991194498','_blank')">Luan - WhatsApp</button>
  </div>
</section>

<!-- CARRINHO -->
<div id="cart">
  <div id="cartItems"></div>
  <strong>Total: R$ <span id="total">0</span></strong>
  <button class="whatsapp" onclick="finalizar()">Finalizar no WhatsApp</button>
</div>
<script>
let cart = [];
let total = 0;

function abrirServicos(){mostrar('servicos')}
function voltarHome(){mostrar('home')}

/* üî• AGENDAMENTO COM AUTO GERA√á√ÉO */
function abrirAgendamento(){
  mostrar('agendamento');
  gerarDatasAutomaticas();
  carregarDatas();
}

function mostrar(id){
  document.getElementById('home').style.display='none';
  document.getElementById('servicos').style.display='none';
  document.getElementById('agendamento').style.display='none';
  document.getElementById(id).style.display='block';
}

function add(nome,valor){
  cart.push({nome,valor});
  total+=valor;
  renderCart();
  document.getElementById('cart').style.display='block';
}

function renderCart(){
  let h='';
  cart.forEach((i,n)=>{
    h+=`<div class="cart-item">${i.nome}<span class="remove" onclick="removeItem(${n})">‚ùå</span></div>`;
  });
  document.getElementById('cartItems').innerHTML=h;
  document.getElementById('total').innerText=total.toFixed(2);
}

function removeItem(i){
  total-=cart[i].valor;
  cart.splice(i,1);
  renderCart();
  if(cart.length===0)document.getElementById('cart').style.display='none';
}

function finalizar(){
  let msg="Ol√°, gostaria de contratar:%0A";
  cart.forEach(i=>msg+="- "+i.nome+"%0A");
  msg+="%0ATotal: R$ "+total.toFixed(2);
  window.open("https://wa.me/5549999741891?text="+msg,"_blank");
}
</script>

<!-- FIREBASE REALTIME -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAgpXloiKBrnRHMBTz8UM1PA3Q9oSYiqU4",
  authDomain: "garagem-hl.firebaseapp.com",
  databaseURL: "https://garagem-hl-default-rtdb.firebaseio.com",
  projectId: "garagem-hl",
  storageBucket: "garagem-hl.firebasestorage.app",
  messagingSenderId: "1050652036484",
  appId: "1:1050652036484:web:3a053bcbbc610038a921d1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* üî• MODO 1 - GERA DATAS AUTOMATICAMENTE */
function gerarDatasAutomaticas(){
  const hoje=new Date();
  const ref=db.ref("datas_disponiveis");

  for(let i=0;i<30;i++){
    const d=new Date(hoje);
    d.setDate(hoje.getDate()+i);

    const ano=d.getFullYear();
    const mes=String(d.getMonth()+1).padStart(2,"0");
    const dia=String(d.getDate()).padStart(2,"0");

    const data=`${ano}-${mes}-${dia}`;

    ref.child(data).once("value",snap=>{
      if(!snap.exists()){
        ref.child(data).set({disponivel:true});
      }
    });
  }
}

/* üî• CARREGA CALEND√ÅRIO */
function carregarDatas(){
  const ref=db.ref("datas_disponiveis");

  ref.on("value",snapshot=>{
    const dados=snapshot.val();
    let html="";

    if(dados){
      for(let data in dados){
        if(dados[data].disponivel===true){
          html+=`
            <button
              style="padding:14px;border-radius:12px;border:none;font-weight:bold;background:#00b4ff;color:#00141f"
              onclick="reservarData('${data}')"
            >
              ${formatarData(data)}
            </button>
          `;
        }
      }
    }

    if(html===""){
      html="<p style='color:#aaa;text-align:center'>Nenhuma data dispon√≠vel</p>";
    }

    document.getElementById("calendario").innerHTML=html;
  });
}

function reservarData(data){
  if(confirm("Confirmar reserva para "+formatarData(data)+"?")){
    db.ref("datas_disponiveis/"+data).update({disponivel:false});
    alert("‚úÖ Data reservada com sucesso!");
  }
}

function formatarData(data){
  const p=data.split("-");
  return p[2]+"/"+p[1]+"/"+p[0];
}
</script>

</body>
</html>
