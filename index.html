<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Garagem HL - Est√©tica Automotiva</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:radial-gradient(circle at top,#0f172a,#020617 70%);
  color:#fff;
  font-family:'Poppins',Arial,sans-serif;
  min-height:100vh;
}

section{display:none;min-height:100vh;padding:30px 20px 180px}
#home{display:block}

.app-container{max-width:480px;margin:auto;text-align:center}

.logo-container img{width:100%;max-width:360px;margin:auto;display:block}
.slogan{color:#38bdf8;letter-spacing:2px;font-size:13px}

.main-btn{
  width:100%;padding:18px;margin:14px 0;
  border:none;border-radius:18px;
  font-weight:700;
  background:linear-gradient(135deg,#38bdf8,#2563eb);
  color:#fff
}

.service-btn{
  width:100%;padding:16px;margin:10px 0;
  border-radius:16px;border:1px solid #1e293b;
  background:#020617;color:#fff;
  display:flex;justify-content:space-between
}

.card{
  background:#020617;border:1px solid #1e293b;
  border-radius:18px;padding:14px;margin-bottom:16px
}

.back{color:#38bdf8;cursor:pointer;display:inline-block;margin-bottom:16px}

input{
  width:100%;padding:14px;border-radius:14px;
  border:1px solid #1e293b;background:#020617;color:#fff
}

input[type="date"]{cursor:pointer}

/* CARRINHO */
#cart{
  position:fixed;bottom:0;left:0;right:0;
  background:#020617;border-top:2px solid #38bdf8;
  padding:14px;display:none;z-index:99
}
.cart-item{border-bottom:1px dashed #1e293b;padding:10px 0}
.cart-desc{font-size:12px;color:#94a3b8}
.remove{color:#ef4444;font-size:12px;cursor:pointer}
.total{color:#38bdf8;font-weight:700;margin-top:8px}

/* ADMIN */
.clock-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;margin-top:10px
}
.clock-hour{
  padding:14px 0;border-radius:12px;
  background:#020617;border:1px solid #1e293b;
  cursor:pointer;font-weight:600
}
.clock-hour.active{
  background:#38bdf8;color:#020617
}

.selected-box{
  margin-top:12px;
  background:#020617;
  border:1px dashed #38bdf8;
  border-radius:12px;
  padding:12px;
  text-align:left;
  font-size:13px;
}
.selected-box strong{color:#38bdf8}
</style>
</head>
<body>
<section id="home">
  <div class="app-container">
    <div class="logo-container">
      <img src="logo-garagem-hl.png">
    </div>
    <div class="slogan">EST√âTICA AUTOMOTIVA</div>
    <button class="main-btn" onclick="abrirServicos()">üöó SERVI√áOS</button>
    <input id="buscaAdmin" placeholder="Pesquisar..." oninput="verificarAdmin()">
  </div>
</section>

<section id="servicos">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8">Servi√ßos</h2>
    <div id="infoServico"></div>

    <div class="card">
      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o de Motor');add('Lava√ß√£o de Motor',50)">
        <span>üõ† Lava√ß√£o de Motor</span><span>R$ 50</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o Completa');add('Lava√ß√£o Completa',80)">
        <span>üöø Lava√ß√£o Completa</span><span>R$ 80</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o Detalhada');add('Lava√ß√£o Detalhada',120)">
        <span>‚ú® Lava√ß√£o Detalhada</span><span>R$ 120</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Descontamina√ß√£o de Pintura');add('Descontamina√ß√£o de Pintura',150)">
        <span>üß™ Descontamina√ß√£o de Pintura</span><span>R$ 150</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Polimento T√©cnico');add('Polimento T√©cnico',250)">
        <span>üíé Polimento T√©cnico</span><span>R$ 250</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Polimento de Far√≥is');add('Polimento de Far√≥is',80)">
        <span>üí° Polimento de Far√≥is</span><span>R$ 80</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Aplica√ß√£o de Cera');add('Aplica√ß√£o de Cera',60)">
        <span>üß¥ Aplica√ß√£o de Cera</span><span>R$ 60</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Aplica√ß√£o de Selante');add('Aplica√ß√£o de Selante',90)">
        <span>üõ° Aplica√ß√£o de Selante</span><span>R$ 90</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Vitrifica√ß√£o');add('Vitrifica√ß√£o',350)">
        <span>üîÆ Vitrifica√ß√£o</span><span>R$ 350</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Revitaliza√ß√£o de Pl√°sticos');add('Revitaliza√ß√£o de Pl√°sticos',70)">
        <span>üñ§ Revitaliza√ß√£o de Pl√°sticos</span><span>R$ 70</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Cristaliza√ß√£o de Para-brisa');add('Cristaliza√ß√£o de Para-brisa',80)">
        <span>üåß Cristaliza√ß√£o de Para-brisa</span><span>R$ 80</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Remo√ß√£o de Chuva √Åcida');add('Remo√ß√£o de Chuva √Åcida',90)">
        <span>‚ò£ Remo√ß√£o de Chuva √Åcida</span><span>R$ 90</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o Bancos de Couro');add('Higieniza√ß√£o Bancos de Couro',150)">
        <span>ü™ë Higieniza√ß√£o Bancos de Couro</span><span>R$ 150</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o Automotiva');add('Higieniza√ß√£o Automotiva',180)">
        <span>üßº Higieniza√ß√£o Automotiva</span><span>R$ 180</span>
      </button>
      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o Residencial');add('Higieniza√ß√£o Residencial',200)">
        <span>üè† Higieniza√ß√£o Residencial</span><span>R$ 200</span>
      </button>
    </div>
  </div>
</section>

<section id="agendamento">
  <span class="back" onclick="voltarServicos()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8">Agendar Hor√°rio</h2>
    <div id="calendario"></div>
  </div>
</section>

<section id="admin">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8">Painel Administrativo</h2>
    <button class="main-btn" onclick="abrirServicoHorario()">üßº Servi√ßos & Hor√°rios</button>
    <button class="main-btn" style="background:#b91c1c" onclick="resetarAgenda()">‚ôª Resetar Agenda</button>
    <div id="servicoHorario" class="card" style="display:none">
      <div id="listaServicosAdmin"></div>
    </div>
  </div>
</section>

<div id="cart">
  <div id="cartItems"></div>
  <div class="total">Total: R$ <span id="total">0</span></div>
  <button class="main-btn" onclick="irParaAgendamento()">üìÖ AGENDAR</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
firebase.initializeApp({
  apiKey:"AIzaSyAgpXloiKBrnRHMBTz8UM1PA3Q9oSYiqU4",
  databaseURL:"https://garagem-hl-default-rtdb.firebaseio.com"
});
const db=firebase.database();

function mostrar(id){
  ["home","servicos","agendamento","admin"].forEach(t=>{
    document.getElementById(t).style.display="none";
  });
  document.getElementById(id).style.display="block";
}
function abrirServicos(){mostrar("servicos");esconderCarrinho();}
function voltarHome(){mostrar("home");esconderCarrinho();}
function voltarServicos(){mostrar("servicos");}
function irParaAgendamento(){mostrar("agendamento");carregarAgendaCliente();}

let cart=[],total=0;

function add(nome,valor){
  cart.push({nome,valor,desc:infoServicos[nome]});
  total+=valor;
  renderCart();
}

function renderCart(){
  let html="";
  cart.forEach((i,n)=>{
    html+=`
      <div class="cart-item">
        <strong>${i.nome}</strong>
        <div class="cart-desc">${i.desc}</div>
        <span class="remove" onclick="removeItem(${n})">‚ùå</span>
      </div>
    `;
  });
  document.getElementById("cartItems").innerHTML=html;
  document.getElementById("total").innerText=total.toFixed(2);
  document.getElementById("cart").style.display="block";
}

function removeItem(i){
  total-=cart[i].valor;
  cart.splice(i,1);
  renderCart();
  if(cart.length===0)esconderCarrinho();
}
function esconderCarrinho(){
  document.getElementById("cart").style.display="none";
}

const infoServicos={
  "Lava√ß√£o de Motor":"Limpeza detalhada do compartimento do motor.",
  "Lava√ß√£o Completa":"Lavagem externa e interna do ve√≠culo.",
  "Lava√ß√£o Detalhada":"Limpeza minuciosa com acabamento premium.",
  "Descontamina√ß√£o de Pintura":"Remove impurezas da pintura.",
  "Polimento T√©cnico":"Corre√ß√£o profissional da pintura.",
  "Polimento de Far√≥is":"Restaura√ß√£o da transpar√™ncia dos far√≥is.",
  "Aplica√ß√£o de Cera":"Prote√ß√£o e brilho para a pintura.",
  "Aplica√ß√£o de Selante":"Prote√ß√£o duradoura para a pintura.",
  "Vitrifica√ß√£o":"Prote√ß√£o cer√¢mica de alto desempenho.",
  "Revitaliza√ß√£o de Pl√°sticos":"Restaura o aspecto original.",
  "Cristaliza√ß√£o de Para-brisa":"Melhora visibilidade e repel√™ncia.",
  "Remo√ß√£o de Chuva √Åcida":"Remove manchas dos vidros.",
  "Higieniza√ß√£o Bancos de Couro":"Limpeza profunda do couro.",
  "Higieniza√ß√£o Automotiva":"Limpeza interna completa.",
  "Higieniza√ß√£o Residencial":"Limpeza de estofados residenciais."
};

function mostrarInfo(nome){
  const div=document.getElementById("infoServico");
  div.innerText=infoServicos[nome];
  div.style.display="block";
}
<script>
const SENHA_ADMIN="1234";
let servicoSelecionadoAdmin=null;
let dataSelecionada=null;
let horariosSelecionados=[];

function verificarAdmin(){
  const i=document.getElementById("buscaAdmin");
  if(i.value.toLowerCase()==="admin"){
    i.value="";
    if(prompt("Senha:")===SENHA_ADMIN)mostrar("admin");
  }
}

function abrirServicoHorario(){
  document.getElementById("servicoHorario").style.display="block";
  carregarListaServicosAdmin();
}

function carregarListaServicosAdmin(){
  const l=document.getElementById("listaServicosAdmin");
  l.innerHTML="<h4>Selecione o servi√ßo</h4>";
  Object.keys(infoServicos).forEach(s=>{
    const b=document.createElement("button");
    b.className="main-btn";
    b.innerText=s;
    b.onclick=()=>abrirTelaServico(s);
    l.appendChild(b);
  });
}

function abrirTelaServico(servico){
  servicoSelecionadoAdmin=servico;
  dataSelecionada=null;
  horariosSelecionados=[];
  const l=document.getElementById("listaServicosAdmin");
  l.innerHTML=`
    <h4>${servico}</h4>
    <input type="date" id="dataServicoAdmin" onchange="selecionarData(this.value)">
    <div id="resumoSelecionado" class="selected-box" style="display:none"></div>
    <div id="relogioServico" class="clock-grid"></div>
    <button class="main-btn" onclick="salvarHorariosServico()">Salvar</button>
    <button class="main-btn" style="background:#334155" onclick="carregarListaServicosAdmin()">Voltar</button>
  `;
  montarRelogioServico();
}

function selecionarData(data){
  dataSelecionada=data;
  atualizarResumo();
}

const horas=[];
for(let h=6;h<=22;h++)horas.push(String(h).padStart(2,"0")+":00");

function montarRelogioServico(){
  const r=document.getElementById("relogioServico");
  r.innerHTML="";
  horas.forEach(h=>{
    const d=document.createElement("div");
    d.className="clock-hour";
    d.innerText=h;
    d.onclick=()=>{
      if(!horariosSelecionados.includes(h)){
        horariosSelecionados.push(h);
        d.classList.add("active");
        atualizarResumo();
      }
    };
    r.appendChild(d);
  });
}

function atualizarResumo(){
  if(!dataSelecionada)return;
  const box=document.getElementById("resumoSelecionado");
  box.style.display="block";
  box.innerHTML=`
    <strong>Data:</strong> ${dataSelecionada.split("-").reverse().join("/")}<br>
    <strong>Hor√°rios:</strong><br>
    ${horariosSelecionados.map(h=>"‚Ä¢ "+h).join("<br>")}
  `;
}

function salvarHorariosServico(){
  if(!dataSelecionada || horariosSelecionados.length===0)return;
  horariosSelecionados.forEach(h=>{
    db.ref(`agenda/${dataSelecionada}/${servicoSelecionadoAdmin}/${h}`).set({vagas:1});
  });
  alert("Hor√°rios salvos");
  carregarListaServicosAdmin();
}

function resetarAgenda(){
  if(confirm("Apagar toda a agenda?")){
    db.ref("agenda").remove();
    alert("Agenda resetada");
  }
}
</script>

</body>
</html>
