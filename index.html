<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Garagem HL - Est√©tica Automotiva</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:radial-gradient(circle at top,#0f172a,#020617 70%);
  color:#fff;
  font-family:'Poppins',Arial,sans-serif;
  min-height:100vh;
}

/* TELAS */
section{
  display:none;
  min-height:100vh;
  padding:28px 18px 180px;
  position:relative;
  z-index:1;
}
#home{display:block}

/* CONTAINER */
.app-container{max-width:480px;margin:auto;text-align:center}

/* LOGO */
.logo-container{margin:20px auto}
.logo-container img{width:100%;max-width:340px;display:block;margin:auto}
.slogan{color:#38bdf8;letter-spacing:2px;font-size:13px}

/* BOT√ïES PRINCIPAIS */
.main-btn{
  width:100%;
  padding:18px;
  margin:14px 0;
  border:none;
  border-radius:18px;
  font-size:16px;
  font-weight:700;
  background:linear-gradient(135deg,#38bdf8,#2563eb);
  color:#fff;
  box-shadow:0 8px 24px rgba(56,189,248,0.35);
  transition:all .15s ease;
}
.main-btn:active{transform:scale(0.96)}

/* VOLTAR */
.back{
  display:inline-block;
  margin-bottom:16px;
  color:#38bdf8;
  font-size:15px;
  cursor:pointer;
}

/* CARD */
.card{
  background:linear-gradient(180deg,#020617,#020617);
  border:1px solid #1e293b;
  border-radius:18px;
  padding:14px;
  margin-bottom:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.5);
}

/* BOT√ïES SERVI√áOS */
.service-btn{
  width:100%;
  padding:16px;
  margin:10px 0;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#020617,#020617);
  border:1px solid #1e293b;
  color:#fff;
  text-align:left;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 14px rgba(0,0,0,0.6);
  transition:all .15s ease;
}
.service-btn:active{transform:scale(0.97)}

.service-name{font-weight:600;font-size:14px}
.service-price{color:#38bdf8;font-weight:700;font-size:14px}

/* INFO SERVI√áO */
#infoServico{
  display:none;
  margin-bottom:14px;
  padding:10px;
  background:#020617;
  border-left:4px solid #38bdf8;
  border-radius:10px;
  font-size:12px;
  color:#cbd5f5;
}

/* INPUT */
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #1e293b;
  background:#020617;
  color:#fff;
  margin-top:10px;
}

/* CARRINHO */
#cart{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:linear-gradient(180deg,#020617,#020617);
  border-top:2px solid #38bdf8;
  padding:14px;
  display:none;
  z-index:99;
}

.cart-item{
  padding:10px 0;
  border-bottom:1px dashed #1e293b;
}
.remove{color:#ef4444;font-size:12px;cursor:pointer}
.total{
  margin-top:8px;
  font-weight:700;
  color:#38bdf8;
  font-size:16px;
}

/* CALEND√ÅRIO */
.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
  margin-top:10px;
}
.day{
  padding:10px 0;
  border-radius:10px;
  background:#020617;
  text-align:center;
  font-size:13px;
  cursor:pointer;
  border:1px solid #1e293b;
}
.day.active{
  background:#38bdf8;
  color:#020617;
  font-weight:700;
}

/* REL√ìGIO */
.clock-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  margin-top:10px;
}
.clock-hour{
  padding:14px 0;
  border-radius:12px;
  background:#020617;
  border:1px solid #1e293b;
  text-align:center;
  font-weight:600;
  cursor:pointer;
}
.clock-hour.active{background:#38bdf8;color:#020617}
</style>
</head>
<body>

<!-- HOME -->
<section id="home">
  <div class="app-container">
    <div class="logo-container">
      <img src="logo-garagem-hl.png" alt="Garagem HL">
    </div>
    <div class="slogan">EST√âTICA AUTOMOTIVA PREMIUM</div>

    <button class="main-btn" onclick="abrirServicos()">üöó SERVI√áOS</button>

    <input id="buscaAdmin" type="text" placeholder="Pesquisar..." oninput="verificarAdmin()">
  </div>
</section>

<!-- SERVI√áOS -->
<section id="servicos">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8;margin-bottom:10px">Servi√ßos Premium</h2>

    <div id="infoServico"></div>

    <div class="card">

      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o de Motor'); add('Lava√ß√£o de Motor',50)">
        <span class="service-name">üõ† Lava√ß√£o de Motor</span>
        <span class="service-price">R$ 50</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o Completa'); add('Lava√ß√£o Completa',80)">
        <span class="service-name">üöø Lava√ß√£o Completa</span>
        <span class="service-price">R$ 80</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Lava√ß√£o Detalhada'); add('Lava√ß√£o Detalhada',120)">
        <span class="service-name">‚ú® Lava√ß√£o Detalhada</span>
        <span class="service-price">R$ 120</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Descontamina√ß√£o de Pintura'); add('Descontamina√ß√£o de Pintura',150)">
        <span class="service-name">üß™ Descontamina√ß√£o de Pintura</span>
        <span class="service-price">R$ 150</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Polimento T√©cnico'); add('Polimento T√©cnico',250)">
        <span class="service-name">üíé Polimento T√©cnico</span>
        <span class="service-price">R$ 250</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Polimento de Far√≥is'); add('Polimento de Far√≥is',80)">
        <span class="service-name">üí° Polimento de Far√≥is</span>
        <span class="service-price">R$ 80</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Aplica√ß√£o de Cera'); add('Aplica√ß√£o de Cera',60)">
        <span class="service-name">üß¥ Aplica√ß√£o de Cera</span>
        <span class="service-price">R$ 60</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Aplica√ß√£o de Selante'); add('Aplica√ß√£o de Selante',90)">
        <span class="service-name">üõ° Aplica√ß√£o de Selante</span>
        <span class="service-price">R$ 90</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Vitrifica√ß√£o'); add('Vitrifica√ß√£o',350)">
        <span class="service-name">üîÆ Vitrifica√ß√£o</span>
        <span class="service-price">R$ 350</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Revitaliza√ß√£o de Pl√°sticos'); add('Revitaliza√ß√£o de Pl√°sticos',70)">
        <span class="service-name">üñ§ Revitaliza√ß√£o de Pl√°sticos</span>
        <span class="service-price">R$ 70</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Cristaliza√ß√£o de Para-brisa'); add('Cristaliza√ß√£o de Para-brisa',80)">
        <span class="service-name">üåß Cristaliza√ß√£o de Para-brisa</span>
        <span class="service-price">R$ 80</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Remo√ß√£o de Chuva √Åcida'); add('Remo√ß√£o de Chuva √Åcida',90)">
        <span class="service-name">‚ò£ Remo√ß√£o de Chuva √Åcida</span>
        <span class="service-price">R$ 90</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o em Bancos de Couro'); add('Higieniza√ß√£o em Bancos de Couro',150)">
        <span class="service-name">ü™ë Higieniza√ß√£o Bancos de Couro</span>
        <span class="service-price">R$ 150</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o Automotiva'); add('Higieniza√ß√£o Automotiva',180)">
        <span class="service-name">üßº Higieniza√ß√£o Automotiva</span>
        <span class="service-price">R$ 180</span>
      </button>

      <button class="service-btn" onclick="mostrarInfo('Higieniza√ß√£o Residencial'); add('Higieniza√ß√£o Residencial',200)">
        <span class="service-name">üè† Higieniza√ß√£o Residencial</span>
        <span class="service-price">R$ 200</span>
      </button>

    </div>
  </div>
</section>

<!-- AGENDAMENTO -->
<section id="agendamento">
  <span class="back" onclick="voltarServicos()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8;margin-bottom:10px">Agendar Hor√°rio</h2>
    <div id="calendario"></div>
  </div>
</section>

<!-- ADMIN -->
<section id="admin">
  <span class="back" onclick="voltarHome()">‚¨Ö Voltar</span>
  <div class="app-container">
    <h2 style="color:#38bdf8;margin-bottom:10px">Painel Admin</h2>

    <button class="main-btn" onclick="abrirBloco('datas')">üìÖ Datas</button>
    <button class="main-btn" onclick="abrirBloco('horarios')">‚è∞ Hor√°rios</button>
    <button class="main-btn" onclick="abrirBloco('reservas')">üìã Reservas</button>

    <!-- BOT√ÉO RESET RESTAURADO -->
    <button class="main-btn" style="background:linear-gradient(135deg,#ef4444,#b91c1c)" onclick="resetarHorarios()">
      ‚ôª Resetar Hor√°rios
    </button>

    <div id="datas" class="card" style="display:none">
      <div class="calendar" id="calendarAdm"></div>
    </div>

    <div id="horarios" class="card" style="display:none">
      <div class="clock-grid" id="clockContainer"></div>
      <button class="main-btn" onclick="salvarHorarios()">Salvar Hor√°rios</button>
    </div>

    <div id="reservas" class="card" style="display:none"></div>
  </div>
</section>

<!-- CARRINHO -->
<div id="cart">
  <div id="cartItems"></div>
  <div class="total">Total: R$ <span id="total">0</span></div>
  <button class="main-btn" onclick="irParaAgendamento()">üìÖ AGENDAR</button>
</div>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAgpXloiKBrnRHMBTz8UM1PA3Q9oSYiqU4",
  authDomain: "garagem-hl.firebaseapp.com",
  databaseURL: "https://garagem-hl-default-rtdb.firebaseio.com",
  projectId: "garagem-hl",
  storageBucket: "garagem-hl.firebasestorage.app",
  messagingSenderId: "1050652036484",
  appId: "1:1050652036484:web:3a053bcbbc610038a921d1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const SENHA_ADMIN = "1234";

const descricoesServicos = {
  "Lava√ß√£o de Motor":"Limpeza t√©cnica do cofre do motor.",
  "Lava√ß√£o Completa":"Lava√ß√£o interna e externa com acabamento.",
  "Lava√ß√£o Detalhada":"Limpeza minuciosa em todos os detalhes.",
  "Descontamina√ß√£o de Pintura":"Remove impurezas da pintura.",
  "Polimento T√©cnico":"Corre√ß√£o de riscos e brilho profundo.",
  "Polimento de Far√≥is":"Restaura transpar√™ncia dos far√≥is.",
  "Aplica√ß√£o de Cera":"Prote√ß√£o e brilho imediato.",
  "Aplica√ß√£o de Selante":"Prote√ß√£o prolongada da pintura.",
  "Vitrifica√ß√£o":"Prote√ß√£o cer√¢mica premium.",
  "Revitaliza√ß√£o de Pl√°sticos":"Restaura apar√™ncia original.",
  "Cristaliza√ß√£o de Para-brisa":"Repele √°gua e melhora visibilidade.",
  "Remo√ß√£o de Chuva √Åcida":"Elimina manchas nos vidros.",
  "Higieniza√ß√£o em Bancos de Couro":"Limpa e hidrata o couro.",
  "Higieniza√ß√£o Automotiva":"Limpeza interna completa.",
  "Higieniza√ß√£o Residencial":"Limpeza de estofados e colch√µes."
};

let cart=[];
let total=0;
let dataSelecionada=null;

/* NAVEGA√á√ÉO */
function mostrar(id){
  ["home","servicos","agendamento","admin"].forEach(s=>{
    document.getElementById(s).style.display="none";
  });
  document.getElementById(id).style.display="block";
}
function abrirServicos(){mostrar("servicos")}
function voltarHome(){mostrar("home");esconderCarrinho()}
function voltarServicos(){mostrar("servicos")}
function irParaAgendamento(){mostrar("agendamento");carregarDatas()}

/* ADMIN LOGIN */
function verificarAdmin(){
  const input=document.getElementById("buscaAdmin");
  if(input.value.toLowerCase()==="admin"){
    input.value="";
    const senha=prompt("Senha do admin:");
    if(senha===SENHA_ADMIN){
      mostrar("admin");
      montarCalendario();
    }else alert("Senha incorreta");
  }
}

/* SERVI√áOS */
function mostrarInfo(servico){
  const area=document.getElementById("infoServico");
  area.innerText=descricoesServicos[servico]||"";
  area.style.display="block";
}

/* CARRINHO */
function add(nome,valor){
  cart.push({nome,valor});
  total+=valor;
  renderCart();
}

function renderCart(){
  let html="";
  cart.forEach((item,index)=>{
    html+=`
      <div class="cart-item">
        <strong style="color:#38bdf8">${item.nome}</strong>
        <div style="font-size:12px;color:#94a3b8">${descricoesServicos[item.nome]}</div>
        <div style="color:#38bdf8;font-weight:700">R$ ${item.valor}</div>
        <span class="remove" onclick="removeItem(${index})">remover</span>
      </div>
    `;
  });
  document.getElementById("cartItems").innerHTML=html;
  document.getElementById("total").innerText=total.toFixed(2);
  document.getElementById("cart").style.display="block";
}

function removeItem(i){
  total-=cart[i].valor;
  cart.splice(i,1);
  renderCart();
  if(cart.length===0)document.getElementById("cart").style.display="none";
}

function esconderCarrinho(){
  cart=[];total=0;
  document.getElementById("cart").style.display="none";
  document.getElementById("cartItems").innerHTML="";
}

/* AGENDAMENTO CLIENTE */
function formatarData(data){
  const p=data.split("-");
  return p[2]+"/"+p[1]+"/"+p[0];
}

function carregarDatas(){
  db.ref("datas").on("value",snap=>{
    const dados=snap.val();
    let html="";
    if(dados){
      for(let data in dados){
        html+=`<div class="card"><strong>${formatarData(data)}</strong><br>`;
        dados[data].forEach(h=>{
          html+=`<button class="service-btn" onclick="confirmarAgendamento('${data}','${h}')">${h}</button>`;
        });
        html+=`</div>`;
      }
    }
    document.getElementById("calendario").innerHTML=html || "Sem hor√°rios";
  });
}

function confirmarAgendamento(data,hora){
  const nome=prompt("Seu nome:");
  if(!nome)return;

  const escolha=prompt("1 - Henrique\n2 - Luan");
  let telefone="";
  if(escolha==="1")telefone="5549999741891";
  else if(escolha==="2")telefone="5547991194498";
  else{alert("Op√ß√£o inv√°lida");return;}

  const lista=cart.map(i=>`‚Ä¢ ${i.nome} - R$ ${i.valor}`).join("\n");

  const msg=`Ol√°, gostaria de agendar na Garagem HL üöó‚ú®

Nome: ${nome}
Data: ${formatarData(data)}
Hor√°rio: ${hora}

Servi√ßos:
${lista}

Total: R$ ${total.toFixed(2)}`;

  window.open(`https://wa.me/${telefone}?text=${encodeURIComponent(msg)}`,"_blank");

  esconderCarrinho();
  voltarHome();
}

/* ====== ADMIN DATAS E HOR√ÅRIOS (CORRIGIDO) ====== */

function montarCalendario(){
  const hoje = new Date();
  const ano = hoje.getFullYear();
  const mes = hoje.getMonth() + 1;

  let html = "";

  for(let i = 1; i <= 31; i++){
    const d = String(i).padStart(2,"0");
    const m = String(mes).padStart(2,"0");
    const key = `${ano}-${m}-${d}`;

    html += `<div class="day" id="day_${key}" onclick="selecionarDia('${key}')">${i}</div>`;
  }

  document.getElementById("calendarAdm").innerHTML = html;
}

function selecionarDia(data){
  dataSelecionada = data;

  // limpa sele√ß√£o visual anterior
  document.querySelectorAll(".day").forEach(el => el.classList.remove("active"));

  const el = document.getElementById("day_" + data);
  if(el) el.classList.add("active");

  carregarRelogio();
}

const horasPadrao=["08:00","09:00","10:00","11:00","13:00","14:00","15:00","16:00","17:00"];

function carregarRelogio(){
  const cont=document.getElementById("clockContainer");
  cont.innerHTML="";
  horasPadrao.forEach(h=>{
    const div=document.createElement("div");
    div.className="clock-hour";
    div.innerText=h;
    div.onclick=()=>div.classList.toggle("active");
    cont.appendChild(div);
  });
}

function salvarHorarios(){
  if(!dataSelecionada){alert("Selecione uma data");return;}
  const ativos=[];
  document.querySelectorAll(".clock-hour.active").forEach(el=>ativos.push(el.innerText));
  db.ref("datas/"+dataSelecionada).set(ativos);
  alert("Hor√°rios salvos!");
}

/* RESETAR HOR√ÅRIOS (RESTAURADO) */
function resetarHorarios(){
  if(!confirm("Tem certeza que deseja apagar TODOS os hor√°rios?")) return;

  db.ref("datas").remove();

  dataSelecionada = null;
  document.getElementById("calendarAdm").innerHTML = "";
  document.getElementById("clockContainer").innerHTML = "";

  alert("Todos os hor√°rios foram resetados com sucesso.");
  montarCalendario();
}

/* ADMIN RESERVAS */
function abrirBloco(id){
  ["datas","horarios","reservas"].forEach(b=>{
    document.getElementById(b).style.display="none";
  });
  document.getElementById(id).style.display="block";
}
</script>

</body>
</html>
